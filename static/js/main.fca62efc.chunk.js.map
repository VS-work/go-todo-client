{"version":3,"sources":["connection/index.js","editForm.js","dataTable.js","appLayout.js","index.js"],"names":["require","config","baseUrl","process","console","log","axiosInstance","axios","create","baseURL","headers","EditForm","Form","name","props","form","useEffect","submitFlag","validateFields","err","values","handleEditOk","resetFields","getFieldDecorator","Item","rules","required","message","autoFocus","placeholder","DataTable","useState","editVisible","setEditVisible","confirmEditLoading","setSubmitFlag","columns","setColumns","data","setData","deleteRequest","setDeleteRequest","completeRequest","setCompleteRequest","priorityRequest","setPriorityRequest","priorities","rowid","a","async","delete","rows","filter","record","key","error","notification","open","description","index","findIndex","r","newData","Object","assign","completed","put","map","desc","priority","e","target","value","title","dataIndex","render","text","Group","defaultValue","onChange","handleChangePriority","Button","type","onClick","color","onConfirm","row","style","margin","dataSource","pagination","scroll","y","visible","onOk","confirmLoading","onCancel","formData","post","res","newRecord","Content","Layout","AppLayout","loading","setLoading","get","content","tip","padding","background","textAlign","ReactDOM","document","getElementById"],"mappings":"6RAEAA,EAAQ,KAAUC,SAEX,IAAMC,EAAUC,2CAEvBC,QAAQC,IAAI,IAAKH,EAASC,2HAEnB,IAAMG,EAAgBC,IAAMC,OAAO,CACxCC,QAASP,EACTQ,QAAS,CACP,eAAgB,sB,wFC6Bb,IAAMC,EAAWC,IAAKJ,OAAO,CAAEK,KAAM,YAApBD,EAlCxB,SAAqBE,GAAQ,IACnBC,EAASD,EAATC,KAERC,qBAAU,WACiB,IAArBF,EAAMG,YAGVF,EAAKG,gBAAe,SAACC,EAAKC,GACpBD,IAGJL,EAAMO,aAAaD,GACnBL,EAAKO,oBAEN,CAACR,EAAMG,aAdgB,IAgBlBM,EAAsBT,EAAMC,KAA5BQ,kBAER,OACE,kBAAC,IAAD,KACE,kBAAC,IAAKC,KAAN,KACGD,EAAkB,UAAW,CAC5BE,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAS,2BADpCJ,CAGC,kBAAC,IAAD,CACEK,WAAS,EACTC,YAAY,kBCzBjB,SAASC,EAAUhB,GAAQ,IAAD,EACOiB,oBAAS,GADhB,mBACxBC,EADwB,KACXC,EADW,OAEFF,oBAAS,GAA/BG,EAFwB,sBAGKH,mBAAS,GAHd,mBAGxBd,EAHwB,KAGZkB,EAHY,OAIDJ,qBAJC,mBAIxBK,EAJwB,KAIfC,EAJe,OAKPN,qBALO,mBAKxBO,EALwB,KAKlBC,EALkB,OAMWR,mBAAS,GANpB,mBAMxBS,EANwB,KAMTC,EANS,OAOeV,mBAAS,GAPxB,mBAOxBW,EAPwB,KAOPC,EAPO,OAQeZ,mBAAS,MARxB,mBAQxBa,EARwB,KAQPC,EARO,KAUzBC,EAAa,CAAC,SAAU,MAAO,QAoDrC9B,qBAAU,kBA/CO+B,EA+CQP,OA9CnBA,EAAgB,GAClB,WAAC,QAAAQ,EAAAC,OAAA,2EAAAD,EAAA,MAES1C,EAAc4C,OAAd,eAA6BH,KAFtC,OAGOI,EAHP,YAGkBb,EAAKc,QAAO,SAAAC,GAAM,OAAIA,EAAOC,MAAQP,MACpDR,EAAQY,GAJX,gDAMG/C,QAAQmD,MAAR,MACAC,IAAaC,KAAK,CAAC9B,QAAS,YAAa+B,YAAa,2BAPzD,wDAAD,IAFa,IAAAX,IA+CwB,CAACP,IAC1CxB,qBAAU,kBAlCS+B,EAkCQL,OAjCrBA,EAAkB,GACpB,WAAC,UAAAM,EAAAC,OAAA,gEAESU,EAAQrB,EAAKsB,WAAU,SAAAC,GAAC,OAAIA,EAAEd,QAAUA,MACxCe,EAAUC,OAAOC,OAAO,GAAI1B,EAAKqB,KAC/BM,UAAY,EAJvB,WAAAjB,EAAA,MAKS1C,EAAc4D,IAAd,eAA0BnB,GAASe,IAL5C,OAMGvB,EAAQD,EAAK6B,KAAI,SAAAN,GAAC,OAAIA,EAAEd,QAAUA,EAAQe,EAAUD,MANvD,gDAQGzD,QAAQmD,MAAR,MACAC,IAAaC,KAAK,CAAC9B,QAAS,YAAa+B,YAAa,+BATzD,wDAAD,IAFe,IAAAX,IAkC0B,CAACL,IAC9C1B,qBAAU,WAnBe,IAACoD,EACX,QADWA,EAmBOxB,IAjB7B,WAAC,UAAAI,EAAAC,OAAA,gEAESU,EAAQrB,EAAKsB,WAAU,SAAAC,GAAC,OAAIA,EAAEd,QAAUqB,EAAKrB,UAC7Ce,EAAUC,OAAOC,OAAO,GAAI1B,EAAKqB,KAC/BU,SAAWD,EAAKE,EAAEC,OAAOC,MAJpC,WAAAxB,EAAA,MAKS1C,EAAc4D,IAAd,eAA0BE,EAAKrB,OAASe,IALjD,OAMGvB,EAAQD,EAAK6B,KAAI,SAAAN,GAAC,OAAIA,EAAEd,QAAUqB,EAAKrB,MAAQe,EAAUD,MAN5D,gDAQGzD,QAAQmD,MAAR,MACAC,IAAaC,KAAK,CAAC9B,QAAS,YAAa+B,YAAa,+BATzD,wDAAD,KAiB+C,CAACd,IAEpD5B,qBAAU,WACR,GAAIF,EAAMwB,KAAM,CA2CdD,EA1CgB,CACd,CACEoC,MAAO,UACPC,UAAW,UACXpB,IAAK,WAEP,CACEmB,MAAO,WACPC,UAAW,WACXC,OAAQ,SAACC,EAAMvB,GAAP,OACc,GAApBA,EAAOY,UACL,6BAAMnB,EAAWO,EAAOgB,WAGtB,kBAAC,IAAMQ,MAAP,CAAaC,aAAczB,EAAOgB,SAAUU,SAAU,SAACT,GAAD,OApEvC,SAACA,EAAGvB,GAAJ,OAAcF,EAAmB,CAAEyB,IAAGvB,UAoEQiC,CAAqBV,EAAGjB,EAAOC,OAC1F,kBAAC,IAAM2B,OAAP,CAAcT,MAAO,GAArB,OACA,kBAAC,IAAMS,OAAP,CAAcT,MAAO,GAArB,UACA,kBAAC,IAAMS,OAAP,CAAcT,MAAO,GAArB,WAKV,CACEC,MAAO,SACPC,UAAW,YACXC,OAAQ,SAACC,EAAMvB,GAAP,MACE,KAARuB,EACE,kBAAC,IAAD,CAAQM,KAAK,UAAUC,QAAS,kBAlFrBpC,EAkF0CM,EAAOC,IAlFxCX,EAAmBI,GAA5B,IAAAA,IAkFX,YAEE,kBAAC,IAAD,CAAKqC,MAAO,QAAZ,eAIR,CACEX,MAAO,MACPC,UAAW,YACXC,OAAQ,SAACC,EAAMvB,GAAP,OACN,kBAAC,IAAD,CAAYoB,MAAM,kBAAkBY,UAAW,kBA7FpCtC,EA6FuDM,EAAOC,IA7FrDb,EAAiBM,GAA1B,IAAAA,IA8FT,0CAKR,IAAMT,EAAOxB,EAAMwB,KAAK6B,KAAI,SAAAmB,GAAG,sBAAUA,EAAV,CAAehC,IAAKgC,EAAIvC,WACvDR,EAAQD,MAET,CAACxB,EAAMwB,OA0BV,OACGF,EACC,6BACE,kBAAC,IAAD,CAAQ+C,QALI,kBAAMlD,GAAe,IAKLiD,KAAK,UAAUK,MAAO,CAAEC,OAAQ,KAA5D,gBACA,kBAAC,IAAD,CACEpD,QAASA,EACTqD,WAAYnD,EACZoD,YAAY,EACZC,OAAQ,CAAEC,EAAG,OACf,kBAAC,IAAD,CACEnB,MAAM,WACNoB,QAAS7D,EACT8D,KApCS,WACf3D,EAAclB,EAAa,IAoCrB8E,eAAgB7D,EAChB8D,SAnBiB,WACvB/D,GAAe,KAoBT,kBAACtB,EAAD,CAAUM,WAAYA,EAAYI,aApCrB,SAAC4E,IACpB,WAAC,UAAAjD,EAAAC,OAAA,2EAAAD,EAAA,MAEqB1C,EAAc4F,KAAd,OAA2BD,IAFhD,OAESE,EAFT,QAGSC,EAAYD,EAAI7D,MACZgB,IAAM8C,EAAUrD,MAC1BR,EAAQ,CAAC6D,GAAF,mBAAgB9D,KACvBL,GAAe,GANlB,kDAQG7B,QAAQmD,MAAR,MACAC,IAAaC,KAAK,CAAC9B,QAAS,YAAa+B,YAAa,2BATzD,yDAAD,QAoBY,qC,IC7IR2C,EAAYC,IAAZD,QAED,SAASE,IAAa,IAAD,EACFxE,mBAAS,MADP,mBACnBO,EADmB,KACbC,EADa,OAEIR,oBAAS,GAFb,mBAEnByE,EAFmB,KAEVC,EAFU,KAkB1B,OAdAzF,qBAAU,YACR,WAAC,QAAAgC,EAAAC,OAAA,gEAEGwD,GAAW,GAFd,WAAAzD,EAAA,MAGyB1C,EAAcoG,IAAd,UAHzB,OAGSC,EAHT,OAIGpE,EAAQoE,EAAQrE,MAChBmE,GAAW,GALd,gDAOGrG,QAAQmD,MAAR,MACAC,IAAaC,KAAK,CAAC9B,QAAS,YAAa+B,YAAa,0BARzD,wDAAD,KAWC,IAGD8C,EACE,kBAAC,IAAD,CAAMI,IAAI,eAER,kBAAC,IAAD,KACI,kBAACP,EAAD,KACE,yBAAKd,MAAO,CAAEsB,QAAS,GAAIC,WAAY,OAAQC,UAAW,WACxD,kBAACjF,EAAD,CAAWQ,KAAMA,OCtBjC0E,IAASrC,OAJL,kBAAC4B,EAAD,MAIoBU,SAASC,eAAe,U","file":"static/js/main.fca62efc.chunk.js","sourcesContent":["import axios from 'axios';\n\nrequire('dotenv').config();\n\nexport const baseUrl = process.env.REACT_APP_API_URL;\n\nconsole.log(111, baseUrl, process.env);\n\nexport const axiosInstance = axios.create({\n  baseURL: baseUrl,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n","import React, { useEffect, useState } from 'react';\nimport 'antd/dist/antd.css';\nimport './index.css';\nimport { Spin, Form, Input } from 'antd';\n// import { axiosInstance, axiosAuthInstance } from \"./connection\";\n\nfunction EditFormSrc(props) {\n  const { form } = props;\n\n  useEffect(() => {\n    if (props.submitFlag === 0) {\n      return;\n    }\n    form.validateFields((err, values) => {\n      if (err) {\n        return;\n      }\n      props.handleEditOk(values);\n      form.resetFields();\n    });\n  }, [props.submitFlag]);\n\n  const { getFieldDecorator } = props.form;\n\n  return (\n    <Form>\n      <Form.Item>\n        {getFieldDecorator('content', {\n          rules: [{ required: true, message: 'Please input content!' }],\n        })(\n          <Input\n            autoFocus\n            placeholder=\"Content\"\n          />,\n        )}\n      </Form.Item>\n    </Form>\n  );\n}\n\nexport const EditForm = Form.create({ name: 'editData' })(EditFormSrc);\n","import React, { useState, useEffect } from 'react';\nimport 'antd/dist/antd.css';\nimport './index.css';\nimport { Table, Button, Modal, Popconfirm, Tag, Radio, notification } from 'antd';\nimport { axiosInstance } from \"./connection\";\nimport { EditForm } from \"./editForm\";\n\nexport function DataTable(props) {\n  const [editVisible, setEditVisible] = useState(false);\n  const [confirmEditLoading] = useState(false);\n  const [submitFlag, setSubmitFlag] = useState(0);\n  const [columns, setColumns] = useState();\n  const [data, setData] = useState();\n  const [deleteRequest, setDeleteRequest] = useState(0);\n  const [completeRequest, setCompleteRequest] = useState(0);\n  const [priorityRequest, setPriorityRequest] = useState(null);\n\n  const priorities = [\"Normal\", \"Low\", \"High\"];\n\n  const handleDelete = rowid => setDeleteRequest(rowid);\n  const handleComplete = rowid => setCompleteRequest(rowid);\n  const handleChangePriority = (e, rowid) => setPriorityRequest({ e, rowid });\n  const doDelete = rowid => {\n    if (deleteRequest > 0) {\n      (async () => {\n        try {\n          await axiosInstance.delete(`todo/${rowid}`);\n          let rows = [...data.filter(record => record.key !== rowid)];\n          setData(rows);  \n        } catch (e) {\n          console.error(e);\n          notification.open({message: \"API issue\", description: \"Data removing error...\"});\n        }\n      })();\n    }\n  };\n  const doComplete = rowid => {\n    if (completeRequest > 0) {\n      (async () => {\n        try {\n          const index = data.findIndex(r => r.rowid === rowid);\n          const newData = Object.assign({}, data[index]);\n          newData.completed = 1;\n          await axiosInstance.put(`todo/${rowid}`, newData);\n          setData(data.map(r => r.rowid === rowid ? newData : r));  \n        } catch (e) {\n          console.error(e);\n          notification.open({message: \"API issue\", description: \"Data modification error...\"});\n        }\n      })();\n    }\n  };\n  const doChangePriority = (desc) => {\n    if (desc !== null) {\n      (async () => {\n        try {\n          const index = data.findIndex(r => r.rowid === desc.rowid);\n          const newData = Object.assign({}, data[index]);\n          newData.priority = desc.e.target.value;\n          await axiosInstance.put(`todo/${desc.rowid}`, newData);\n          setData(data.map(r => r.rowid === desc.rowid ? newData : r));  \n        } catch (e) {\n          console.error(e);\n          notification.open({message: \"API issue\", description: \"Data modification error...\"});\n        }\n      })();\n    }\n  };\n\n  useEffect(() => doDelete(deleteRequest), [deleteRequest]);\n  useEffect(() => doComplete(completeRequest), [completeRequest]);\n  useEffect(() => doChangePriority(priorityRequest), [priorityRequest]);\n\n  useEffect(() => {\n    if (props.data) {\n      const columns = [\n        {\n          title: 'Content',\n          dataIndex: 'content',\n          key: 'content',\n        },\n        {\n          title: 'Priority',\n          dataIndex: 'priority',\n          render: (text, record) => (\n            record.completed != 0 ? (\n              <div>{priorities[record.priority]}</div>\n            ) :\n              (\n                <Radio.Group defaultValue={record.priority} onChange={(e) => handleChangePriority(e, record.key)} >\n                  <Radio.Button value={1}>Low</Radio.Button>\n                  <Radio.Button value={0}>Normal</Radio.Button>\n                  <Radio.Button value={2}>High</Radio.Button>\n                </Radio.Group>\n              )\n          ),\n        },\n        {\n          title: 'Status',\n          dataIndex: 'completed',\n          render: (text, record) => (\n            text == \"0\" ? (\n              <Button type=\"primary\" onClick={() => handleComplete(record.key)}>Complete</Button>\n            ) : (\n                <Tag color={'blue'}>Completed</Tag>\n              )\n          )\n        },\n        {\n          title: '...',\n          dataIndex: 'operation',\n          render: (text, record) =>\n            <Popconfirm title=\"Sure to delete?\" onConfirm={() => handleDelete(record.key)}>\n              <a>Delete</a>\n            </Popconfirm>\n        }\n      ];\n      setColumns(columns);\n      const data = props.data.map(row => ({ ...row, key: row.rowid }));\n      setData(data);\n    }\n  }, [props.data]);\n\n  const doEditOk = () => {\n    setSubmitFlag(submitFlag + 1);\n  };\n\n  const handleEditOk = (formData) => {\n    (async () => {\n      try {\n        const res = await axiosInstance.post(`todo`, formData);\n        const newRecord = res.data;\n        newRecord.key = newRecord.rowid;\n        setData([newRecord, ...data]);\n        setEditVisible(false);  \n      } catch (e) {\n        console.error(e);\n        notification.open({message: \"API issue\", description: \"Data creation error...\"});\n      }\n    })();\n  };\n\n  const handleEditCancel = () => {\n    setEditVisible(false);\n  };\n  const addNewRow = () => setEditVisible(true);\n\n  return (\n    !columns ? (<></>) :\n      <div>\n        <Button onClick={addNewRow} type=\"primary\" style={{ margin: 10 }}>Add new Todo</Button>\n        <Table\n          columns={columns}\n          dataSource={data}\n          pagination={false}\n          scroll={{ y: 240 }} />\n        <Modal\n          title=\"New Todo\"\n          visible={editVisible}\n          onOk={doEditOk}\n          confirmLoading={confirmEditLoading}\n          onCancel={handleEditCancel}\n        >\n          <EditForm submitFlag={submitFlag} handleEditOk={handleEditOk}></EditForm>\n        </Modal>\n      </div>\n  )\n}\n","import React, { useEffect, useState } from 'react';\nimport 'antd/dist/antd.css';\nimport './index.css';\nimport { Layout, Spin, notification } from 'antd';\nimport { axiosInstance } from \"./connection\";\nimport { DataTable } from './dataTable';\n\nconst { Content } = Layout;\n\nexport function AppLayout() {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(true);\n        const content = await axiosInstance.get(`todos`);\n        setData(content.data);\n        setLoading(false);  \n      } catch (e) {\n        console.error(e);\n        notification.open({message: \"API issue\", description: \"Data reading error...\"});\n      }\n    })();\n  }, []);\n\n  return (\n    loading ? (\n      <Spin tip=\"Loading...\"></Spin>\n    ) : (\n        <Layout>\n            <Content>\n              <div style={{ padding: 24, background: '#fff', textAlign: 'center' }}>\n                <DataTable data={data}></DataTable>\n              </div>\n            </Content>\n        </Layout>\n      )\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\nimport './index.css';\nimport { AppLayout } from './appLayout';\n\nconst Root = () => {\n  return (\n    <AppLayout></AppLayout>\n  );\n}\n\nReactDOM.render(Root(), document.getElementById('root'));\n"],"sourceRoot":""}